@startuml
package presentation
{
    +class Main{
        +{static} main(args: String[])
    }
    ~class HomeView
    {
        -closet: Closet
        -closetView: ClosetView
        -personView: PersonView
        -nav: NavigationController
        +HomeView(c: Closet, nav: NavigationController)
        +update(): void
        -addGarment(): void
        -addFavorite(): void
        -displaySettings(): void
        -displayTryOn(): void
    }
    
    ~class LoginView
    {
        -accountCollection: AccountCollection
        -nav: NavigationController
        +LoginView(ac: AccountCollection, nav: NavigationController)
        +update(): void
        -promptForUserInput(): void
        -checkAccount(): void
        -displaySetup(): void
        -displayHome(): void

    }
    ~class SetupView
    {
        -accountCollection: AccountCollection
        -nav: NavigationController
        +SetupView(ac: AccountCollection, nav: NavigationController)
        -promptForUserInput(): void
        -addUserPreference(): void

        
    }
    ~class ClosetView
    {
        -closet: Closet
        -personView: PersonView
        -posesView: PosesView
        +ClosetView(c: Closet)
        +update(): void
        -displayClothes(): void
        -displaySuggestions(): void
        
    }
    ~class PersonView
    {
        -closet: Closet
        -poses: PoseCollection
        +PersonView(c: Closet, p: PoseCollection): void
    }
    ~class TryOnView
    {
        -tryOnController: TryOnController
        -nav: NavigationController

        +TryOnView(tc: TryOnController, nav: NavigationController)
        +update(): void
        -displayPoses(): void
        -displayOutfitSuggestions(): void
        -saveCurrentLook(): void
       
    }
    ~class ClothesView
    {
        -closet: Closet
        +ClothesView(c: Closet)
        +update(): void
        -displayClothes(): void
    }
    ~class SuggestionView
    {
        -closet: Closet
        -accountCollection: AccountCollection
        -strategy: SuggestionStrategy
        +SuggestionView(c: Closet, ac: AccountCollection, s: SuggestionStrategy)
        +update(): void
        -displaySuggestions(): void
    }
    ~class PosesView
    {
        -poses: PoseCollection
        +PosesView(p: PoseCollection)
        +update(): void
        -displayPoses(): void
    }

    ~class SettingView
    {
        -accountCollection: AccountCollection
        -nav: NavigationController
        +SettingView(ac: AccountCollection, nav: NavigationController)
        +update(): void
    }

}
package controller{
    class NavigationController {
        -accounts: AccountCollection
        -closet: Closet
        -poses: PoseCollection
        -looks: LookCollection
        -strategy: SuggestionStrategy
        +NavigationController(ac: AccountCollection, c: Closet, p: PoseCollection, lc: LookCollection, s: SuggestionStrategy)
        +showLogin(): void
        +showSetup(): void
        +showHome(): void
        +showTryOn(): void
        +showSettings(): void
    }

    class TryOnController {
        -closet: Closet
        -poses: PoseCollection
        -looks: LookCollection
        -strategy: SuggestionStrategy
        +TryOnController(c: Closet, p: PoseCollection, lc: LookCollection, s: SuggestionStrategy)
        +getClothesForBodyPart(part: String): List<Garment>
        +getAvailablePoses(): List<Pose>
        +applyPose(p: Pose): void
        +generateSuggestedOutfit(): Look
        +saveCurrentLook(l: Look): void
    }

}
package domain
{
    +class Closet
    {
        -clothes: List<Garment>
        -loader: GarmentDataLoader
        -saver: GarmentDataWriter
        +Closet(gl: GarmentDataLoader, gw: GarmentDataWriter)
       +add(sn: String, spec: GarmentSpec) <<throws>> IllegalArgumentException: void
        +remove(sn: SerialNumber): boolean
        +search(spec: GarmentSpec): Set<Garment>

        -snExists(sn: SerialNumber): boolean
        -loadCloset(): void
        +update(): void
        +toString(): String
    }
    +class Garment
    {
        -sn: SerialNumber
        -spec: GarmentSpec
        -isFavorite: boolean

        +Garment(sn: SerialNumber, spec: GarmentSpec)
        ~match(spec: GarmentSpec): boolean
        ~isSameSN(sn: SerialNumber): boolean
        +toString(): String
    }

    +class PoseCollection
    {
        -poses: List<Pose>
        -loader: PoseDataLoader
        -saver: PoseDataWriter
        +PoseCollection(pl: PoseDataLoader, pw: PoseDataWriter)

        +addPose(p: Pose): void
        +removePose(p: Pose): boolean
        -loadPoses(): void
        +update(): void
    }

    +class Pose{
        -poseId: String
        -name: String
        +Pose(poseId: String, name: String)
        +toString(): String
    }
    +class AccountCollection
    {
        -accounts: List<Account>
        -loader: AccountDataLoader
        -saver: AccountDataWriter
        +AccountCollection(al: AccountDataLoader, aw: AccountDataWriter)
        +addAccount(a: Account): void
        +removeAccount(a: Account): boolean
        +findAccount(username: String, password: String): Account
        -loadAccounts(): void
        +update(): void
    }
    +class Account
    {
        -username: String
        -passwordHash: String
        -brandPreference: BrandPreference

        +Account(username: String, passwordHash: String, bp: BrandPreference)
        +toString(): String
    }
    
    +class SerialNumber
    {
        -sn: String
        +SerialNumber(sn: String) <<throws>> IllegalArgumentException
        -validateSNFormat(): boolean
        ~isSameSN(sn: SerialNumber): boolean
        +toString(): String
    }

    +class GarmentSpec
    {
        -category: String
        -color: String
        -size: String
        -season: String
        -style: String

        +GarmentSpec(category: String, color: String, size: String, season: String, style: String)
        ~match(other: GarmentSpec): boolean
        ~isComplete(): boolean
        +toString(): String
    }
    +class GarmentDataMapper
    {
        +{static} createGarment(GarmentDTO): Garment
        +{static} createGarmentDTO(g: Garment): GarmentDTO
    }
    +class PoseDataMapper
    {
        +{static} createPose(PoseDTO): Pose
        +{static} createPoseDTO(p: Pose): PoseDTO
    }
    +class AccountDataMapper
    {
        +{static} createAccount(AccountDTO): Account
        +{static} createAccountDTO(a: Account): AccountDTO
    }
    +interface SuggestionStrategy{
        +getSuggestions(c: Closet, ac: AccountCollection): List<Garment>
    }
    +class SimpleSuggestionStrategy{
        +getSuggestions(c: Closet, ac: AccountCollection): List<Garment>
    }

    +class Look{
        -id: String
        -garments: List<Garment>
        -pose: Pose
        +Look(id: String, garments: List<Garment>, pose: Pose)
        +toString(): String
    }

    +class LookCollection{
        -looks: List<Look>
        +addLook(l: look): void
        +removeLook(l: Look): boolean
        +getLooks(): List<Look>
    }

    +class Brand{
        -name: String
        +Brand(name: String)
        +toString(): String
    }
    +class BrandPreference{
        -favoriteBrands: List<Brand>
        +addBrand(b: Brand): void
        +removeBrand(b: Brand): boolean
        +getFavoriteBrands(): List<Brand>
    }
}

package datasource
{
    +abstract class GarmentDataWriter
    {
        -observers: List<GarmentObserver>

        +GarmentDataWriter()
        +GarmentDataWriter(observers: List<GarmentObserver>)
        +subscribe(o: GarmentObserver): void
        +unsubscribe(o: GarmentObserver): void
        #updateAll(): void

        +{abstract} addGarment(dto:GarmentDTO): void
        +{abstract} removeGarment(dto:GarmentDTO): boolean
    }
    
    +abstract class PoseDataWriter
    {
        -observers: List<PoseObserver>

        +PoseDataWriter()
        +PoseDataWriter(observers: List<PoseObserver>)
        +subscribe(o: PoseObserver): void
        +unsubscribe(o: PoseObserver): void
        #updateAll(): void

        +{abstract} addPose(dto:PoseDTO): void
        +{abstract} removePose(dto:PoseDTO): boolean
    }

    +abstract class AccountDataWriter
    {
        -observers: List<AccountObserver>

        +AccountDataWriter()
        +AccountDataWriter(observers: List<AccountObserver>)
        +subscribe(o: AccountObserver): void
        +unsubscribe(o: AccountObserver): void
        #updateAll(): void

        +{abstract} addAccount(dto:AccountDTO): void
        +{abstract} removeAccount(dto:AccountDTO): boolean
    }

    +interface GarmentObserver
    {
        +{abstract}update(): void
    }
    +interface PoseObserver
    {
         +{abstract}update(): void
    }
    +interface AccountObserver
    {
        +{abstract}update(): void
    }

    +class DatabaseGarmentDataWriter
    {
        +addGarment(dto:GarmentDTO): void
        +removeGarment(dto:GarmentDTO): boolean
    }
    +class DatabasePoseDataWriter
    {
        +addPose(dto:PoseDTO): void
        +removePose(dto:PoseDTO): boolean
    }
    +class DatabaseAccountDataWriter
    {
        +addAccount(dto:AccountDTO): void
        +removeAccount(dto:AccountDTO): boolean
    }

    +class GarmentDTO
    {
        +{final} serialNumber: String
        +{final} category: String
        +{final} color: String
        +{final} size: String
        +{final} season: String
        +{final} style: String

        +GarmentDTO(String, String, String, String, String, String)
    }
    +class PoseDTO
    {
        +{final} poseId: String
        +{final} name: String

        +PoseDTO(String, String)
    }
    +class AccountDTO
    {
        +{final} username: String
        +{final} passwordHash: String

        +AccountDTO(String, String)

    }
    +interface GarmentDataLoader
    {
        +{abstract} getNextGarment(): GarmentDTO
    }
    +interface PoseDataLoader
    {
        +{abstract} getNextPose(): PoseDTO
    }
    +interface AccountDataLoader
    {
        +{abstract} getNextAccount(): AccountDTO
    }
    +class DatabaseGarmentDataLoader
    {
        +getNextGarment(): GarmentDTO
    }
    +class DatabasePoseDataLoader
    {
        +getNextPose(): PoseDTO
    }
    +class DatabaseAccountDataLoader
    {
        +getNextAccount(): AccountDTO
    }

}

Main ..> LoginView
Main ..> GarmentDataWriter
Main ..> PoseDataWriter
Main ..> AccountDataWriter
Main ..> GarmentDataLoader
Main ..> PoseDataLoader
Main ..> AccountDataLoader
Main ..> DatabaseGarmentDataWriter
Main ..> DatabasePoseDataWriter
Main ..> DatabaseAccountDataWriter
Main ..> DatabaseGarmentDataLoader
Main ..> DatabasePoseDataLoader
Main ..> DatabaseAccountDataLoader
Main ..> NavigationController
Main ..> TryOnController

HomeView --> ClosetView
HomeView --> PersonView

LoginView --> NavigationController
SetupView --> NavigationController
HomeView  --> NavigationController
TryOnView --> NavigationController
SettingView --> NavigationController

TryOnView --> TryOnController

NavigationController --> AccountCollection
NavigationController --> Closet
NavigationController --> PoseCollection
NavigationController --> LookCollection
NavigationController --> SuggestionStrategy

TryOnController --> Closet
TryOnController --> PoseCollection
TryOnController --> LookCollection
TryOnController --> SuggestionStrategy

Closet -->"*" Garment
Closet --> GarmentDataWriter
Closet --> GarmentDataLoader
Closet ..> GarmentDataMapper
Closet ..> GarmentSpec
Closet ..> SerialNumber

PoseCollection -->"*" Pose
PoseCollection --> PoseDataWriter
PoseCollection --> PoseDataLoader
PoseCollection ..> PoseDataMapper

AccountCollection -->"*" Account
AccountCollection --> AccountDataWriter
AccountCollection --> AccountDataLoader
AccountCollection ..> AccountDataMapper

Garment --> GarmentSpec
Garment --> SerialNumber

GarmentDataWriter -->"*" GarmentObserver
PoseDataWriter -->"*" PoseObserver
AccountDataWriter -->"*" AccountObserver

Closet ..|> GarmentObserver
ClosetView ..|> GarmentObserver
ClothesView ..|> GarmentObserver
SuggestionView ..|> GarmentObserver

PoseCollection ..|> PoseObserver
PosesView ..|> PoseObserver

AccountCollection ..|> AccountObserver
LoginView ..|> AccountObserver
SettingView ..|> AccountObserver

GarmentDataWriter ..> GarmentDTO
GarmentDataMapper ..> GarmentDTO
GarmentDataLoader ..> GarmentDTO

PoseDataWriter ..> PoseDTO
PoseDataMapper ..> PoseDTO
PoseDataLoader ..> PoseDTO

AccountDataWriter ..> AccountDTO
AccountDataMapper ..> AccountDTO
AccountDataLoader ..> AccountDTO

DatabaseGarmentDataWriter --|> GarmentDataWriter
DatabasePoseDataWriter --|> PoseDataWriter
DatabaseAccountDataWriter --|> AccountDataWriter

DatabaseGarmentDataLoader ..|> GarmentDataLoader
DatabasePoseDataLoader ..|> PoseDataLoader
DatabaseAccountDataLoader ..|> AccountDataLoader

SimpleSuggestionStrategy ..|> SuggestionStrategy
SuggestionView ..> SuggestionStrategy

LookCollection -->"*" Look
Look --> "*" Garment
Look --> Pose
TryOnView --> LookCollection

Account --> BrandPreference
BrandPreference -->"*" Brand

Main ..> NavigationController
Main ..> TryOnController

LoginView --> NavigationController
SetupView --> NavigationController
HomeView  --> NavigationController
TryOnView --> NavigationController
SettingView --> NavigationController

TryOnView --> TryOnController

NavigationController --> AccountCollection
NavigationController --> Closet
NavigationController --> PoseCollection
NavigationController --> LookCollection
NavigationController --> SuggestionStrategy

TryOnController --> Closet
TryOnController --> PoseCollection
TryOnController --> LookCollection
TryOnController --> SuggestionStrategy
@enduml
